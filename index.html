<!DOCTYPE html>
<html lang="en">
<head>
    <title>three.js webgl - lights - rect area light</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <!-- Link to the raw CSS file from GitHub -->
    <link type="text/css" rel="stylesheet" href="./main.css">
</head>
<body>

    <div id="info">
        <a href="https://threejs.org" target="_blank" rel="noopener">three.js</a> - THREE.RectAreaLight<br/>
        by <a href="http://github.com/abelnation" target="_blank" rel="noopener">abelnation</a>
    </div>

    <script type="module">

        // Use the CDN links for three.js and its helpers
         import * as THREE from 'https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.module.js';
      
      // Import OrbitControls, RectAreaLightHelper, and RectAreaLightUniformsLib
          import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.134.0/examples/jsm/controls/OrbitControls.js';
          
          // Load other required libraries from the CDN if needed
          import { RectAreaLightHelper } from 'https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/helpers/RectAreaLightHelper.js';
          import { RectAreaLightUniformsLib } from 'https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/lights/RectAreaLightUniformsLib.js';
  
        // Link to the raw stats.module.js hosted on GitHub
        import Stats from './stats.module.js';

        let renderer, scene, camera;
        let stats, meshKnot;

        init();

        function init() {

            renderer = new THREE.WebGLRenderer( { antialias: true } );
            renderer.setPixelRatio( window.devicePixelRatio );
            renderer.setSize( window.innerWidth, window.innerHeight );
            renderer.setAnimationLoop( animation );
            document.body.appendChild( renderer.domElement );

            camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );
            camera.position.set( 0, 5, - 15 );

            scene = new THREE.Scene();

            // Initialize the RectAreaLight Uniforms
            RectAreaLightUniformsLib.init();

            // Create three different RectAreaLights
            const rectLight1 = new THREE.RectAreaLight( 0xff0000, 5, 4, 10 );
            rectLight1.position.set( - 5, 5, 5 );
            scene.add( rectLight1 );

            const rectLight2 = new THREE.RectAreaLight( 0x00ff00, 5, 4, 10 );
            rectLight2.position.set( 0, 5, 5 );
            scene.add( rectLight2 );

            const rectLight3 = new THREE.RectAreaLight( 0x0000ff, 5, 4, 10 );
            rectLight3.position.set( 5, 5, 5 );
            scene.add( rectLight3 );

            // Add helpers for the RectAreaLights
            scene.add( new RectAreaLightHelper( rectLight1 ) );
            scene.add( new RectAreaLightHelper( rectLight2 ) );
            scene.add( new RectAreaLightHelper( rectLight3 ) );

            // Create a floor
            const geoFloor = new THREE.BoxGeometry( 2000, 0.1, 2000 );
            const matStdFloor = new THREE.MeshStandardMaterial( { color: 0xbcbcbc, roughness: 0.1, metalness: 0 } );
            const mshStdFloor = new THREE.Mesh( geoFloor, matStdFloor );
            scene.add( mshStdFloor );

            // Create a torus knot mesh
            const geoKnot = new THREE.TorusKnotGeometry( 1.5, 0.5, 200, 16 );
            const matKnot = new THREE.MeshStandardMaterial( { color: 0xffffff, roughness: 0, metalness: 0 } );
            meshKnot = new THREE.Mesh( geoKnot, matKnot );
            meshKnot.position.set( 0, 5, 0 );
            scene.add( meshKnot );

            // Initialize OrbitControls
            const controls = new OrbitControls( camera, renderer.domElement );
            controls.target.copy( meshKnot.position );
            controls.update();

            // Handle window resizing
            window.addEventListener( 'resize', onWindowResize );

            // Initialize stats for performance tracking
            stats = new Stats();
            document.body.appendChild( stats.dom );

        }

        function onWindowResize() {
            renderer.setSize( window.innerWidth, window.innerHeight );
            camera.aspect = ( window.innerWidth / window.innerHeight );
            camera.updateProjectionMatrix();
        }

        function animation( time ) {
            // Rotate the meshKnot over time
            meshKnot.rotation.y = time / 1000;
            renderer.render( scene, camera );
            stats.update();
        }

    </script>
</body>
</html>
